<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 옵션 -->  
<mapper namespace="Option">

<!-- 옵션list 가져오기 -->
<select id="getOptions" parameterType="Integer" resultType="donzo.thefun.model.OptionDto">
	SELECT * FROM FUN_OPTION_VIEW WHERE PROJECTSEQ=#{seq} ORDER BY SEQ ASC
</select>

<!-- 구매할 옵션list 가져오기-->
<select id="selectOptions" parameterType="Integer" resultType="donzo.thefun.model.OptionDto" >
	SELECT * FROM FUN_OPTION_VIEW WHERE SEQ=#{seq}
</select>

<!-- 옵션 추가 -->
<insert id="newWrite" parameterType="donzo.thefun.model.OptionDto">
	INSERT INTO FUN_OPTION(SEQ, PROJECTSEQ, TITLE, CONTENT, PRICE, STOCK)
	VALUES(SEQ_OPTION.NEXTVAL, #{projectseq}, #{title}, #{content}, #{price}, #{stock})
</insert> 

<!-- 구매후 옵션 재고 update -->
<update id="updateStock" parameterType="donzo.thefun.model.OptionDto">
	UPDATE FUN_OPTION SET STOCK=#{stock} 
	WHERE SEQ=#{seq}
</update>

</mapper>